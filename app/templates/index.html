{% extends "layout.html" %}

{% block title %}Dashboard - Image Processor{% endblock %}

{% block content %}

<div class="container">
  <div class="top-bar">
    <h1>Image Processor Dashboard</h1>
    <button class="logout-btn" onclick="logout()">Logout</button>
  </div>

  <hr class="divider">

  <!-- Upload -->
  <div class="card">
    <div class="card-header">
      <h2>Upload Image</h2>
    </div>
    <form onsubmit="uploadFile(event)">
      <input id="file" type="file" required>
      <button type="submit">Upload</button>
    </form>
  </div>

  <!-- Stress test -->
  <div class="card" id="stress-card">
    <div class="card-header">
      <h2>Stress Test (Admin Only)</h2>
    </div>
    <label for="stress-file">Select File</label>
    <select id="stress-file"></select>

    <label for="duration">Duration (seconds)</label>
    <input id="duration" type="number" value="10" min="1">

    <button onclick="stressTest()">Run Stress Test</button>
  </div>

<!-- Uploaded files -->
<div class="card">
  <div class="results-header">
    <h2>Uploaded Files</h2>
    <div class="results-actions">
      <button id="clear-uploads-btn" class="danger-btn" onclick="clearUploads()">ðŸ—‘ Delete All Uploads</button>
    </div>
  </div>

  <div class="filter-bar">
    <input id="uploads-filter-input" type="text" placeholder="Search uploads...">
    <button class="filter-btn" onclick="applyUploadsFilter()">Filter</button>
  </div>

  <div id="uploads-list"></div>
  <div id="uploads-pagination" class="pagination"></div>
</div>


  <!-- Results -->
  <div class="card results-card">
    <div class="results-header">
      <h2>Results</h2>
      <div class="results-actions">
        <button id="clear-data-btn" class="danger-btn" onclick="clearData()">ðŸ—‘ Delete All Data</button>
      </div>
    </div>

    <div class="filter-bar">
      <input id="filter-input" type="text" placeholder="Search results...">
      <button class="filter-btn" onclick="applyFilter()">Filter</button>
    </div>

    <div id="results-container">
      <div id="results"></div>
      <div id="pagination" class="pagination"></div>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", populateFileDropdown);
</script>
{% endblock %}